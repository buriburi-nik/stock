<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Tracker Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .search-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .search-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-group {
            flex: 1;
            min-width: 200px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e1e5e9;
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        .trending-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .trending-section h2 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.5rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3rem;
        }

        .stock-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-item .label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .info-item .value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
        }

        .positive {
            color: #28a745 !important;
        }

        .negative {
            color: #dc3545 !important;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 20px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        .comparison-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #dc3545;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .search-controls {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .chart-container {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìà Stock Tracker Dashboard</h1>
            <p>Real-time stock data with interactive charts and trending analysis</p>
        </div>

        <div class="search-section">
            <div class="search-controls">
                <div class="input-group">
                    <label for="stockSymbol">Stock Symbol</label>
                    <input type="text" id="stockSymbol" placeholder="Enter symbol (e.g., AAPL, MSFT)" maxlength="10">
                </div>
                <div class="input-group">
                    <button class="btn btn-primary" onclick="searchStock()">Search Stock</button>
                </div>
            </div>
        </div>

        <div class="trending-section">
            <h2>üî• Trending Stocks</h2>
            <div class="search-controls">
                <div class="input-group">
                    <label for="trendingSelect">Select Trending Stock</label>
                    <select id="trendingSelect">
                        <option value="">Choose a trending stock...</option>
                        <option value="AAPL">Apple Inc. (AAPL)</option>
                        <option value="MSFT">Microsoft Corp. (MSFT)</option>
                        <option value="GOOGL">Alphabet Inc. (GOOGL)</option>
                        <option value="AMZN">Amazon.com Inc. (AMZN)</option>
                        <option value="TSLA">Tesla Inc. (TSLA)</option>
                        <option value="META">Meta Platforms (META)</option>
                        <option value="NVDA">NVIDIA Corp. (NVDA)</option>
                        <option value="NFLX">Netflix Inc. (NFLX)</option>
                        <option value="AMD">Advanced Micro Devices (AMD)</option>
                        <option value="ADBE">Adobe Inc. (ADBE)</option>
                    </select>
                </div>
                <div class="input-group">
                    <button class="btn btn-primary" onclick="loadTrendingStock()">Load Stock</button>
                </div>
                <div class="input-group">
                    <button class="btn btn-secondary" onclick="addToComparison()">Add to Comparison</button>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3>üìä Stock Information</h3>
                <div id="stockInfo">
                    <div class="loading">
                        <div class="info-item">
                            <div class="label">Search for a stock symbol to view detailed information</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üìà Price Chart</h3>
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>‚öñÔ∏è Stock Comparison</h3>
            <div id="comparisonSection">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Company</th>
                            <th>Price</th>
                            <th>Change</th>
                            <th>Change %</th>
                            <th>Volume</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="comparisonTableBody">
                        <tr>
                            <td colspan="7" style="text-align: center; color: #666; padding: 40px;">
                                No stocks added for comparison yet. Use "Add to Comparison" button to compare stocks.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let chart = null;
        let comparisonStocks = [];
        const API_KEY = 'demo'; // Using demo key for example

        // Initialize the dashboard
        function initDashboard() {
            setupChart();
            document.getElementById('stockSymbol').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchStock();
                }
            });
        }

        // Setup initial chart
        function setupChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Stock Price',
                        data: [],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#667eea',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    elements: {
                        point: {
                            hoverRadius: 8
                        }
                    }
                }
            });
        }

        // Search for stock
        async function searchStock() {
            const symbol = document.getElementById('stockSymbol').value.trim().toUpperCase();
            if (!symbol) {
                showError('Please enter a stock symbol');
                return;
            }

            showLoading();
            try {
                await fetchStockData(symbol);
                showSuccess(`Successfully loaded data for ${symbol}`);
            } catch (error) {
                showError(`Failed to fetch data for ${symbol}: ${error.message}`);
            }
        }

        // Load trending stock
        async function loadTrendingStock() {
            const symbol = document.getElementById('trendingSelect').value;
            if (!symbol) {
                showError('Please select a trending stock');
                return;
            }

            showLoading();
            try {
                await fetchStockData(symbol);
                showSuccess(`Successfully loaded trending stock ${symbol}`);
            } catch (error) {
                showError(`Failed to fetch data for ${symbol}: ${error.message}`);
            }
        }

        // Fetch stock data (using mock data for demo)
        async function fetchStockData(symbol) {
            // Simulating API call with mock data
            const mockData = generateMockStockData(symbol);
            
            // Update stock info
            updateStockInfo(mockData);
            
            // Update chart
            updateChart(mockData);
        }

        // Generate mock stock data
        function generateMockStockData(symbol) {
            const basePrice = Math.random() * 500 + 50;
            const change = (Math.random() - 0.5) * 20;
            const changePercent = (change / basePrice) * 100;
            
            // Generate historical data for chart
            const historicalData = [];
            const labels = [];
            let currentPrice = basePrice;
            
            for (let i = 30; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString());
                
                const priceChange = (Math.random() - 0.5) * 10;
                currentPrice += priceChange;
                historicalData.push(parseFloat(currentPrice.toFixed(2)));
            }

            return {
                symbol: symbol,
                companyName: getCompanyName(symbol),
                price: parseFloat(basePrice.toFixed(2)),
                change: parseFloat(change.toFixed(2)),
                changePercent: parseFloat(changePercent.toFixed(2)),
                volume: Math.floor(Math.random() * 10000000) + 1000000,
                marketCap: Math.floor(Math.random() * 1000000000000) + 10000000000,
                peRatio: parseFloat((Math.random() * 30 + 5).toFixed(2)),
                historicalData: historicalData,
                labels: labels
            };
        }

        // Get company name from symbol
        function getCompanyName(symbol) {
            const companies = {
                'AAPL': 'Apple Inc.',
                'MSFT': 'Microsoft Corporation',
                'GOOGL': 'Alphabet Inc.',
                'AMZN': 'Amazon.com Inc.',
                'TSLA': 'Tesla, Inc.',
                'META': 'Meta Platforms, Inc.',
                'NVDA': 'NVIDIA Corporation',
                'NFLX': 'Netflix, Inc.',
                'AMD': 'Advanced Micro Devices',
                'ADBE': 'Adobe Inc.'
            };
            return companies[symbol] || `${symbol} Corporation`;
        }

        // Update stock information display
        function updateStockInfo(data) {
            const stockInfoDiv = document.getElementById('stockInfo');
            const changeClass = data.change >= 0 ? 'positive' : 'negative';
            const changeSymbol = data.change >= 0 ? '+' : '';

            stockInfoDiv.innerHTML = `
                <div class="stock-info">
                    <div class="info-item">
                        <div class="label">Symbol</div>
                        <div class="value">${data.symbol}</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Company</div>
                        <div class="value">${data.companyName}</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Current Price</div>
                        <div class="value">$${data.price}</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Change</div>
                        <div class="value ${changeClass}">${changeSymbol}$${data.change}</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Change %</div>
                        <div class="value ${changeClass}">${changeSymbol}${data.changePercent}%</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Volume</div>
                        <div class="value">${data.volume.toLocaleString()}</div>
                    </div>
                    <div class="info-item">
                        <div class="label">Market Cap</div>
                        <div class="value">$${(data.marketCap / 1000000000).toFixed(1)}B</div>
                    </div>
                    <div class="info-item">
                        <div class="label">P/E Ratio</div>
                        <div class="value">${data.peRatio}</div>
                    </div>
                </div>
            `;
        }

        // Update chart with new data
        function updateChart(data) {
            chart.data.labels = data.labels;
            chart.data.datasets[0].data = data.historicalData;
            chart.data.datasets[0].label = `${data.symbol} Price History`;
            chart.update();
        }

        // Add stock to comparison
        function addToComparison() {
            const symbol = document.getElementById('trendingSelect').value || 
                          document.getElementById('stockSymbol').value.trim().toUpperCase();
            
            if (!symbol) {
                showError('Please select or search for a stock first');
                return;
            }

            // Check if stock already exists in comparison
            if (comparisonStocks.find(stock => stock.symbol === symbol)) {
                showError(`${symbol} is already in the comparison table`);
                return;
            }

            // Generate data for comparison
            const stockData = generateMockStockData(symbol);
            comparisonStocks.push(stockData);
            updateComparisonTable();
            showSuccess(`${symbol} added to comparison`);
        }

        // Update comparison table
        function updateComparisonTable() {
            const tbody = document.getElementById('comparisonTableBody');
            
            if (comparisonStocks.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; color: #666; padding: 40px;">
                            No stocks added for comparison yet. Use "Add to Comparison" button to compare stocks.
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = comparisonStocks.map(stock => {
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                
                return `
                    <tr>
                        <td><strong>${stock.symbol}</strong></td>
                        <td>${stock.companyName}</td>
                        <td>$${stock.price}</td>
                        <td class="${changeClass}">${changeSymbol}$${stock.change}</td>
                        <td class="${changeClass}">${changeSymbol}${stock.changePercent}%</td>
                        <td>${stock.volume.toLocaleString()}</td>
                        <td>
                            <button class="btn btn-secondary" onclick="removeFromComparison('${stock.symbol}')" style="padding: 5px 10px; font-size: 12px;">
                                Remove
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Remove stock from comparison
        function removeFromComparison(symbol) {
            comparisonStocks = comparisonStocks.filter(stock => stock.symbol !== symbol);
            updateComparisonTable();
            showSuccess(`${symbol} removed from comparison`);
        }

        // Show loading state
        function showLoading() {
            const stockInfoDiv = document.getElementById('stockInfo');
            stockInfoDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Loading stock data...</div>
                </div>
            `;
        }

        // Show error message
        function showError(message) {
            const existingError = document.querySelector('.error');
            if (existingError) {
                existingError.remove();
            }
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            document.querySelector('.search-section').appendChild(errorDiv);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }

        // Show success message
        function showSuccess(message) {
            const existingSuccess = document.querySelector('.success');
            if (existingSuccess) {
                existingSuccess.remove();
            }
            
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            document.querySelector('.search-section').appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>


// const API_KEY = '14FJIEOUQHCJIUCV';
// const API_BASE = 'https://www.alphavantage.co/query';
// let chart = null, stocks = [], cache = {}, lastRequestTime = 0;

// const DEMO_STOCKS = {
//     AAPL: [190.25, 1.15, '0.61', 45230000], MSFT: [417.30, 2.50, '0.60', 28450000],
//     GOOGL: [174.65, 1.40, '0.81', 32150000], TSLA: [248.90, 1.70, '0.69', 75680000],
//     META: [498.75, 2.35, '0.47', 18920000], NVDA: [1135.20, 6.30, '0.56', 42360000],
//     AMZN: [180.85, 1.25, '0.70', 38450000], NFLX: [628.45, 1.75, '0.28', 8930000]
// };

// const $ = id => document.getElementById(id);
// const show = (id, show = true) => $(id).classList.toggle('show', show);
// const hide = id => show(id, false);

// document.addEventListener('DOMContentLoaded', () => {
//     $('stockSymbol').addEventListener('keypress', e => e.key === 'Enter' && loadStock());
//     $('trendingSelect').addEventListener('change', function () {
//         if (this.value) $('stockSymbol').value = this.value;
//     });

//     const ctx = $('priceChart').getContext('2d');
//     chart = new Chart(ctx, {
//         type: 'line',
//         data: {
//             labels: [],
//             datasets: [{
//                 label: 'Stock Price',
//                 data: [],
//                 borderColor: '#667eea',
//                 backgroundColor: 'rgba(102, 126, 234, 0.1)',
//                 borderWidth: 3,
//                 fill: true,
//                 tension: 0.4,
//                 pointBackgroundColor: '#667eea',
//                 pointBorderColor: '#fff',
//                 pointBorderWidth: 2,
//                 pointRadius: 4
//             }]
//         },
//         options: {
//             responsive: true,
//             maintainAspectRatio: false,
//             plugins: { legend: { display: true, position: 'top' } },
//             scales: {
//                 x: { display: true, title: { display: true, text: 'Date' } },
//                 y: { display: true, title: { display: true, text: 'Price ($)' } }
//             },
//             elements: { point: { hoverRadius: 8 } }
//         }
//     });
// });

// async function throttledFetch(url) {
//     const now = Date.now();
//     const delay = Math.max(0, 15000 - (now - lastRequestTime));
//     await new Promise(resolve => setTimeout(resolve, delay));
//     lastRequestTime = Date.now();
//     return fetch(url);
// }

// async function loadStock() {
//     const symbol = $('stockSymbol').value.trim().toUpperCase();
//     if (!symbol) return showError('Please enter a stock symbol');
    
//     show('loadingIndicator'); hide('errorMessage');

//     try {
//         if (cache[symbol] && Date.now() - cache[symbol].time < 300000) {
//             displayStock(cache[symbol].data);
//             await loadChart(symbol);
//             return hide('loadingIndicator');
//         }

//         const res = await throttledFetch(`${API_BASE}?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`);
//         const data = await res.json();

//         if (data['Global Quote'] && data['Global Quote']['05. price']) {
//             cache[symbol] = { data: data['Global Quote'], time: Date.now() };
//             displayStock(data['Global Quote']);
//             await loadChart(symbol);
//         } else {
//             loadDemo(symbol);
//         }
//     } catch (e) {
//         loadDemo(symbol);
//     }

//     hide('loadingIndicator');
// }

// function loadDemo(symbol) {
//     const fallback = DEMO_STOCKS[symbol];
//     let quote;

//     if (fallback) {
//         const [basePrice, baseChange, percent, vol] = fallback;
//         const variation = (Math.random() - 0.5) * 5;
//         const newPrice = basePrice + variation;
//         const newChange = newPrice - (basePrice - baseChange);
//         const newPercent = ((newChange / (newPrice - newChange)) * 100).toFixed(2);

//         quote = {
//             '01. symbol': symbol,
//             '05. price': newPrice.toFixed(2),
//             '09. change': newChange.toFixed(2),
//             '10. change percent': `${newPercent}%`,
//             '06. volume': (vol + Math.floor((Math.random() - 0.5) * 1000000)).toString(),
//             '03. high': (newPrice + 3).toFixed(2),
//             '04. low': (newPrice - 3).toFixed(2),
//             '02. open': (newPrice - 2).toFixed(2),
//             '08. previous close': (newPrice - newChange).toFixed(2)
//         };
//     } else {
//         const price = Math.random() * 200 + 50;
//         const change = (Math.random() - 0.5) * 10;
//         const percent = ((change / price) * 100).toFixed(2);
//         quote = {
//             '01. symbol': symbol,
//             '05. price': price.toFixed(2),
//             '09. change': change.toFixed(2),
//             '10. change percent': `${percent}%`,
//             '06. volume': (Math.floor(Math.random() * 50000000) + 5000000).toString(),
//             '03. high': (price + 5).toFixed(2),
//             '04. low': (price - 5).toFixed(2),
//             '02. open': (price - 2).toFixed(2),
//             '08. previous close': (price - change).toFixed(2)
//         };
//     }

//     displayStock(quote);
//     genChart(symbol, parseFloat(quote['05. price']));
// }

// function displayStock(q) {
//     const [price, change, percent, vol] = [
//         parseFloat(q['05. price']),
//         parseFloat(q['09. change']),
//         q['10. change percent'].replace('%', ''),
//         parseInt(q['06. volume']).toLocaleString()
//     ];
//     const [high, low, open, prev] = [
//         parseFloat(q['03. high']),
//         parseFloat(q['04. low']),
//         parseFloat(q['02. open']),
//         parseFloat(q['08. previous close'])
//     ];
//     const cls = change >= 0 ? 'positive' : 'negative';
//     const sym = change >= 0 ? '+' : '';

//     $('stockInfo').innerHTML = `
//         <div class="info-item"><div class="info-label">Current Price</div><div class="info-value">$${price.toFixed(2)}</div></div>
//         <div class="info-item"><div class="info-label">Change</div><div class="info-value ${cls}">${sym}$${change.toFixed(2)}</div></div>
//         <div class="info-item"><div class="info-label">Change %</div><div class="info-value ${cls}">${sym}${percent}%</div></div>
//         <div class="info-item"><div class="info-label">Volume</div><div class="info-value">${vol}</div></div>
//         <div class="info-item"><div class="info-label">Day High</div><div class="info-value">$${high.toFixed(2)}</div></div>
//         <div class="info-item"><div class="info-label">Day Low</div><div class="info-value">$${low.toFixed(2)}</div></div>
//         <div class="info-item"><div class="info-label">Open</div><div class="info-value">$${open.toFixed(2)}</div></div>
//         <div class="info-item"><div class="info-label">Previous Close</div><div class="info-value">$${prev.toFixed(2)}</div></div>
//     `;
// }

// async function loadChart(symbol) {
//     try {
//         const res = await throttledFetch(`${API_BASE}?function=TIME_SERIES_DAILY&symbol=${symbol}&apikey=${API_KEY}`);
//         const data = await res.json();

//         if (data['Time Series (Daily)']) {
//             const series = data['Time Series (Daily)'];
//             const dates = Object.keys(series).slice(0, 30).reverse();
//             const prices = dates.map(d => parseFloat(series[d]['4. close']));
//             updateChart(dates, prices, symbol);
//         } else {
//             const price = parseFloat($('stockInfo').querySelector('.info-value').textContent.replace('$', '')) || 100;
//             genChart(symbol, price);
//         }
//     } catch {
//         const price = parseFloat($('stockInfo').querySelector('.info-value').textContent.replace('$', '')) || 100;
//         genChart(symbol, price);
//     }
// }

// function genChart(symbol, price) {
//     const labels = ['5d ago', '4d ago', '3d ago', '2d ago', 'Yesterday', 'Today'];
//     const prices = [price * 0.95, price * 0.98, price * 1.02, price * 0.99, price * 1.01, price];
//     updateChart(labels, prices, symbol);
// }

// function updateChart(labels, data, symbol) {
//     chart.data.labels = labels;
//     chart.data.datasets[0].data = data;
//     chart.data.datasets[0].label = `${symbol} Price`;
//     chart.update();
// }

// function showError(msg) {
//     $('errorMessage').textContent = msg;
//     show('errorMessage');
//     hide('loadingIndicator');
// }

// function selectTrendingStock(symbol) {
//     $('stockSymbol').value = symbol;
//     $('trendingSelect').value = symbol;
//     loadStock();
// }
